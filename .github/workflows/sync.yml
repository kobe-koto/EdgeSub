name: Sync with Original Repository

on:
  push:
    branches:
      - main  # 你可以根据需要修改为其他主分支，例如 master
  schedule:
    - cron: '0 * * * *'  # 每小时同步一次，你可以根据需要设置 cron 表达式

jobs:
  sync:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Add original repository as a remote
      run: git remote add upstream https://github.com/kobe-koto/EdgeSub.git  # 请确保替换为正确的原仓库地址

    - name: Fetch updates from original repository
      run: git fetch upstream

    - name: Merge updates from original repository
      run: git merge upstream/main  # 确保这里的“main”与原仓库分支一致

    - name: Push changes
      run: git push origin main  # 将更改推送到你自己的仓库
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
